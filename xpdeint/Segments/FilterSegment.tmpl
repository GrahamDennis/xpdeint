@*
FilterSegment.tmpl

Created by Graham Dennis on 2008-03-13.
Copyright (c) 2008 __MyCompanyName__. All rights reserved.
*@
@extends xpdeint.Segments._FilterSegment
@from xpdeint.CallOnceGuards import callOncePerInstanceGuard

@*
  Description of template
*@
@def description: segment $segmentNumber (Filter)

@*
  Function implementations
*@
@def segmentFunctionBody($function)
${evaluateComputedVectors($computedVectorsNeedingPrecalculationForOperatorContainers($operatorContainers))}@slurp
  @#
  @for $operatorContainer in $operatorContainers

${operatorContainer.evaluateOperators(parentFunction = function)}@slurp
  @end for
  @#
@end def

@@callOncePerInstanceGuard
@def initialise
  @# Let the operators allocate and initialise any arrays they need
  @for $operatorContainer in $operatorContainers
$operatorContainer.initialise@slurp
  @end for
  @#
@end def

@@callOncePerInstanceGuard
@def finalise
  @#
  @# Let the operators do their own clean up
  @for $operatorContainer in $operatorContainers
$operatorContainer.finalise@slurp
  @end for
  @#
@end def
